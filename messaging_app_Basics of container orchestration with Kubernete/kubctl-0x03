#!/bin/bash

echo "ğŸš€ Applying rolling update for BLUE deployment..."
kubectl apply -f blue_deployment.yaml

echo "ğŸ“¡ Monitoring rollout status..."
kubectl rollout status deployment/messaging-blue

echo "ğŸŒ Testing for downtime..."
APP_URL=$(minikube service messaging-service --url)

while true; do
  curl -s -o /dev/null -w "%{http_code} " $APP_URL
  sleep 1
done
